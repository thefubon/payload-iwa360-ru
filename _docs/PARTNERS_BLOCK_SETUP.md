# Partners Block - Инструкция по установке

## Что было сделано

Я создал полнофункциональный блок партнеров с бесконечной анимацией логотипов. Все файлы созданы и готовы к использованию.

### Созданные файлы:

1. **`/blocks/Partners.ts`** - Определение блока для Payload CMS
2. **`/components/blocks/PartnersBlock.tsx`** - React компонент с анимацией
3. **`/types/blocks.ts`** - Обновлен с типами для Partners блока
4. **`/components/RenderBlocks.tsx`** - Обновлен для рендера Partners блока
5. **`/collections/Pages.ts`** - Обновлен с импортом Partners блока
6. **`/blocks/index.ts`** - Обновлен с экспортом Partners блока

### Документация:

- **`/_docs/PARTNERS_BLOCK_GUIDE.md`** - Полное руководство по использованию
- **`/_docs/PARTNERS_BLOCK_SETUP.md`** - Эта инструкция

## Следующие шаги

### 1. Создание таблиц в базе данных

Для работы блока необходимо создать таблицы в PostgreSQL. Это делается автоматически при запуске development сервера:

```bash
pnpm run dev
```

Payload CMS автоматически:
- Создаст таблицы `pages_blocks_partners` и `pages_blocks_partners_logos`
- Применит все необходимые миграции
- Блок будет готов к использованию

### 2. Проверка работы

После запуска `pnpm run dev`:

1. Откройте админку: `http://localhost:3000/admin`
2. Создайте или отредактируйте страницу
3. В секции "Контент страницы" нажмите "+ Add Block"
4. Выберите **"Блок партнеров"**
5. Заполните поля (см. руководство в `PARTNERS_BLOCK_GUIDE.md`)

### 3. Добавление логотипов

Для демонстрации работы блока:

1. Загрузите логотипы в Media (в админке)
2. Добавьте минимум 6-8 логотипов в блок Partners
3. Настройте заголовок и параметры анимации
4. Сохраните страницу
5. Откройте страницу на фронтенде

## Особенности реализации

### ✅ Бесшовная анимация

- Логотипы дублируются 3 раза для создания бесконечного loop
- CSS animation движет ленту на 1/3 ширины
- Никаких видимых переключений или дерганий
- Плавные градиенты по краям

### ✅ Производительность

- Используется `transform: translateX()` (GPU ускорение)
- `loading="lazy"` для изображений
- Оптимизированная анимация без перегрузки браузера

### ✅ UX улучшения

- Пауза при наведении мыши
- Плавный grayscale эффект
- Адаптивность на всех устройствах
- Поддержка ссылок на логотипах

## Структура блока в Payload

```typescript
{
  blockType: 'partners',
  title: string,
  description?: string,
  backgroundColor?: string,
  animationSpeed: 'slow' | 'normal' | 'fast',
  grayscale: boolean,
  logos: [
    {
      logo: MediaType,
      alt: string,
      link?: string
    }
  ]
}
```

## Пример использования

### В админке:

```
Заголовок: "Trusted by the largest Next.js companies."
Описание: (пусто)
Цвет фона: White (#ffffff)
Скорость анимации: Обычная
Черно-белые логотипы: ✅ Включено

Логотипы:
1. Stripe (alt: "Stripe") - https://stripe.com
2. Unity (alt: "Unity Technologies") - https://unity.com
3. Washington Post (alt: "Washington Post") - https://washingtonpost.com
...и так далее
```

### Результат на фронтенде:

- Заголовок по центру
- Плавно движущаяся лента логотипов справа налево
- Черно-белые логотипы с цветом при наведении
- Градиенты по краям
- Остановка анимации при наведении

## Возможные проблемы и решения

### Ошибка: "relation pages_blocks_partners does not exist"

**Решение**: Запустите `pnpm run dev` чтобы создать таблицы в БД.

### Логотипы не загружаются

**Решение**: 
1. Проверьте, что изображения загружены в Media
2. Проверьте, что связь `relationTo: 'media'` работает корректно

### Анимация дергается

**Решение**: 
1. Добавьте больше логотипов (минимум 8)
2. Убедитесь, что изображения оптимизированы
3. Попробуйте уменьшить скорость анимации

## Дальнейшие улучшения (опционально)

Если потребуется, можно добавить:

1. **Вертикальное направление** - добавить выбор направления анимации
2. **Множественные ряды** - несколько рядов логотипов
3. **Автоматическая подстройка** - определение оптимальной скорости по количеству логотипов
4. **Темная тема** - автоматическая инверсия цветов для dark mode

## Тестирование

После запуска dev сервера протестируйте:

- ✅ Создание блока в админке
- ✅ Загрузка и выбор логотипов
- ✅ Плавность анимации
- ✅ Пауза при наведении
- ✅ Адаптивность на мобильных
- ✅ Работа ссылок
- ✅ Grayscale эффект

## Поддержка

Все необходимые файлы созданы. Блок готов к использованию после выполнения шага 1 (создание таблиц через `pnpm run dev`).

Подробное руководство по использованию смотрите в файле: `/_docs/PARTNERS_BLOCK_GUIDE.md`

---

**Статус**: ✅ Готово к использованию  
**Требуется**: Запуск `pnpm run dev` для создания таблиц  
**Дата**: 2025-10-05

