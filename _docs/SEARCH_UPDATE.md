# üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞

## –î–∞—Ç–∞: 2025-10-05

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–∏—Å–∫ –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª –∫–æ–Ω—Ç–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤ Hero –∏ Form. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–æ–∏—Å–∫–µ "–º–µ—Å—Å" –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/messenger`, —Ö–æ—Ç—è –≤ –Ω–µ–π –µ—Å—Ç—å Hero –±–ª–æ–∫ —Å —Ç–µ–∫—Å—Ç–æ–º "–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä".

## –ü—Ä–∏—á–∏–Ω–∞

–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ Payload CMS query —Å —É—Å–ª–æ–≤–∏—è–º–∏ `where`, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–∫–∞–ª–∏ —Ç–æ–ª—å–∫–æ –ø–æ –ø–æ–ª—è–º `title` –∏ `description` **–Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Pages**. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–æ–≤ (–∫–æ—Ç–æ—Ä–æ–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–æ–ª–µ `layout`) –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–ª–æ—Å—å –≤ –∑–∞–ø—Ä–æ—Å–µ.

### –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞:
```typescript
const pagesResult = await payload.find({
  collection: 'pages',
  where: {
    or: [
      { title: { contains: query } },
      { description: { contains: query } }
    ],
  },
})
```

–≠—Ç–æ –Ω–∞—Ö–æ–¥–∏–ª–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —Å–æ–≤–ø–∞–¥–∞–ª —Å `title` –∏–ª–∏ `description` —Å–∞–º–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–æ **–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–æ** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–æ–≤ –≤–Ω—É—Ç—Ä–∏ `layout`.

## –†–µ—à–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–∏–ª–∏ –ø–æ–¥—Ö–æ–¥ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é:

1. **–ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (—Å —Ä–∞–∑—É–º–Ω—ã–º –ª–∏–º–∏—Ç–æ–º 100)
2. **–ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**:
   - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`title`)
   - –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`description`)
   - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ Hero –±–ª–æ–∫–æ–≤ (`title`, `description`, —Ç–µ–∫—Å—Ç –±–µ–π–¥–∂–µ–π)
   - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ Form –±–ª–æ–∫–æ–≤ (`title`, `description`)
3. **–§–∏–ª—å—Ç—Ä—É–µ–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞** –ø–æ –≤—Å–µ–º—É —Ç–µ–∫—Å—Ç—É
4. **–í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –ø—Ä–µ–≤—å—é

### –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:
```typescript
// 1. –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
const pagesResult = await payload.find({
  collection: 'pages',
  limit: 100,
})

// 2. –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑–≤–ª–µ–∫–∞–µ–º –≤–µ—Å—å —Ç–µ–∫—Å—Ç
const allResults = pagesResult.docs.map((page) => {
  const titleText = page.title || ''
  const descriptionText = page.description || ''
  
  let blockText = ''
  if (page.layout) {
    page.layout.forEach((block) => {
      if (block.blockType === 'hero') {
        blockText += ` ${block.title} ${block.description}`
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∏–∑ –±–µ–π–¥–∂–µ–π
        block.badges?.forEach((badge) => {
          blockText += ` ${badge.label}`
        })
      }
    })
  }

  // 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
  const allText = `${titleText} ${descriptionText} ${blockText}`.toLowerCase()
  const hasMatch = allText.includes(query.toLowerCase())

  return hasMatch ? { ...page, snippet } : null
})

// 4. –§–∏–ª—å—Ç—Ä—É–µ–º –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º
const results = allResults.filter(Boolean).slice(0, 10)
```

## –ß—Ç–æ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è —Ç–µ–ø–µ—Ä—å

### ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã (Pages Collection)
- `title` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### ‚úÖ Hero –±–ª–æ–∫–∏
- `title` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫–∞
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ –±–ª–æ–∫–∞
- `badges[].label` - **–ù–û–í–û–ï**: —Ç–µ–∫—Å—Ç –≤—Å–µ—Ö –±–µ–π–¥–∂–µ–π

### ‚úÖ Form –±–ª–æ–∫–∏
- `title` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫–∞
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ –±–ª–æ–∫–∞

## –£–ª—É—á—à–µ–Ω–∏—è

1. **–£–º–Ω—ã–π snippet**: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç, –≥–¥–µ –Ω–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
2. **–ò—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º, –≥–¥–µ –Ω–∞—à–ª–∏ (title/description/block)
3. **–ü–æ–∏—Å–∫ –ø–æ –±–µ–π–¥–∂–∞–º**: —Ç–µ–ø–µ—Ä—å –∏—â–µ—Ç –∏ –ø–æ —Ç–µ–∫—Å—Ç—É –±–µ–π–¥–∂–µ–π –≤ Hero –±–ª–æ–∫–∞—Ö

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü–ª—é—Å—ã:
- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –≤–µ–∑–¥–µ (–≤ –±–ª–æ–∫–∞—Ö, –±–µ–π–¥–∂–∞—Ö –∏ —Ç.–¥.)
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –±–ª–æ–∫–∏
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–µ–≤—å—é

### –ú–∏–Ω—É—Å—ã:
- ‚ö†Ô∏è –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (limit: 100)
- ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Node.js, –Ω–µ –≤ –ë–î

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–∞–π—Ç–æ–≤:

–ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –±–æ–ª—å—à–µ 100, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **PostgreSQL Full-Text Search**:
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ –º–∏–≥—Ä–∞—Ü–∏—é
CREATE INDEX pages_search_idx ON pages 
USING gin(to_tsvector('russian', title || ' ' || description));
```

2. **Algolia/MeiliSearch**: –¥–ª—è —Å–∞–π—Ç–æ–≤ —Å —Ç—ã—Å—è—á–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü

3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ó–∞–ø—Ä–æ—Å: "–º–µ—Å—Å"
- –û–∂–∏–¥–∞–Ω–∏–µ: –Ω–∞—Ö–æ–¥–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É "Messenger"
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

### –¢–µ—Å—Ç 2: –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É Hero –±–ª–æ–∫–∞
- –ó–∞–ø—Ä–æ—Å: "–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä"
- –û–∂–∏–¥–∞–Ω–∏–µ: –Ω–∞—Ö–æ–¥–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å Hero –±–ª–æ–∫–æ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º "–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä"
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

### –¢–µ—Å—Ç 3: –ü–æ–∏—Å–∫ –ø–æ –±–µ–π–¥–∂–∞–º
- –ó–∞–ø—Ä–æ—Å: "–≤—Å—Ç—Ä–µ—á–∏"
- –û–∂–∏–¥–∞–Ω–∏–µ: –Ω–∞—Ö–æ–¥–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å Hero –±–ª–æ–∫–∞–º–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –±–µ–π–¥–∂ "–í—Å—Ç—Ä–µ—á–∏"
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

### –¢–µ—Å—Ç 4: –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫
- –ó–∞–ø—Ä–æ—Å: "–ú–ï–°–°" / "–º–µ—Å—Å" / "–ú–µ—Å—Å"
- –û–∂–∏–¥–∞–Ω–∏–µ: –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

## –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ API

**–ó–∞–ø—Ä–æ—Å**: `GET /api/search?q=–º–µ—Å—Å`

**–û—Ç–≤–µ—Ç**:
```json
{
  "results": [
    {
      "id": "123",
      "title": "Messenger",
      "slug": "messenger",
      "description": "...–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏...",
      "url": "/messenger",
      "matchSource": "block"
    }
  ],
  "total": 1,
  "query": "–º–µ—Å—Å"
}
```

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. ‚ú® –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π)
2. üîç –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–∏ (–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä = –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ = –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—É)
3. üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. üéØ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
5. üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –Ω–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç:
- ‚úÖ –í –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –í –æ–ø–∏—Å–∞–Ω–∏—è—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –í Hero –±–ª–æ–∫–∞—Ö (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –æ–ø–∏—Å–∞–Ω–∏—è, –±–µ–π–¥–∂–∏)
- ‚úÖ –í Form –±–ª–æ–∫–∞—Ö (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –æ–ø–∏—Å–∞–Ω–∏—è)

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ

