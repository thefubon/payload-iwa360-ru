# üì¶ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vercel Blob Storage - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üéØ –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–∞–±–æ—Ç—ã

### ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Blob)
- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `/media`
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Blob Storage
- **BLOB_READ_WRITE_TOKEN** –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –≤ `.env`

### ‚úÖ Production (—Å Blob)
- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Vercel Blob Storage
- –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ Vercel
- **BLOB_READ_WRITE_TOKEN** –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vercel Blob Storage –¥–ª—è Production

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Vercel (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)

```bash
# –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://vercel.com/new
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –ù–∞–∂–º–∏—Ç–µ Deploy

# –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ CLI
vercel
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ Blob Storage

#### 2.1 –û—Ç–∫—Ä–æ–π—Ç–µ Vercel Dashboard

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://vercel.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç `payload-iwa360-ru`

#### 2.2 –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Storage

1. –í –º–µ–Ω—é –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **Storage**
2. –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é: https://vercel.com/dashboard/stores

#### 2.3 –°–æ–∑–¥–∞–π—Ç–µ Blob

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Create Database**
2. –í—ã–±–µ—Ä–∏—Ç–µ **Blob** (–∏–∫–æ–Ω–∫–∞ —Å –æ–±–ª–∞–∫–æ–º)
3. –í –ø–æ–ª–µ Name –≤–≤–µ–¥–∏—Ç–µ: `payload-media`
4. –ù–∞–∂–º–∏—Ç–µ **Create**

#### 2.4 –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ –ø—Ä–æ–µ–∫—Ç—É

1. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Blob Storage
2. –ù–∞–∂–º–∏—Ç–µ **Connect Project**
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç `payload-iwa360-ru`
4. –ù–∞–∂–º–∏—Ç–µ **Connect**

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞

#### 3.1 –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É .env.local

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Blob Storage:
1. –ù–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **.env.local** (–≤ –≤–µ—Ä—Ö–Ω–µ–º –º–µ–Ω—é)
2. –¢–∞–º –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω —Ç–æ–∫–µ–Ω

#### 3.2 –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

–í—ã —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
```env
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_XXXXXXXXXXXXXXXXXXXXXXXXX
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞** (—á–∞—Å—Ç—å –ø–æ—Å–ª–µ `=`)

### –®–∞–≥ 4: –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### 4.1 –í Vercel Dashboard

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞: **Settings ‚Üí Environment Variables**
2. –ù–∞–∂–º–∏—Ç–µ **Add New**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Key**: `BLOB_READ_WRITE_TOKEN`
   - **Value**: `vercel_blob_rw_XXXXXXXXXXXXXXXXXXXXXXXXX` (–≤–∞—à —Ç–æ–∫–µ–Ω)
   - **Environments**: –í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ (Production, Preview, Development)
4. –ù–∞–∂–º–∏—Ç–µ **Save**

#### 4.2 –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Blob –ª–æ–∫–∞–ª—å–Ω–æ, –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ .env
nano .env

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_XXXXXXXXXXXXXXXXXXXXXXXXX
```

**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** `.env` –≤ `.gitignore`, —Ç–æ–∫–µ–Ω –Ω–µ –ø–æ–ø–∞–¥–µ—Ç –≤ Git!

### –®–∞–≥ 5: –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Dashboard

1. –í Vercel Dashboard ‚Üí **Deployments**
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –ù–∞–∂–º–∏—Ç–µ **‚ãØ** (—Ç—Ä–∏ —Ç–æ—á–∫–∏) ‚Üí **Redeploy**

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Git

```bash
git add .
git commit -m "Add Blob Storage configuration"
git push
```

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç!

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `https://your-app.vercel.app/admin`
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Media**
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
5. –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –í Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

‚úÖ PAYLOAD_SECRET
‚úÖ DATABASE_URI
‚úÖ NEXT_PUBLIC_SERVER_URL
‚úÖ BLOB_READ_WRITE_TOKEN  ‚Üê –≠—Ç–∞ –≤–∞–∂–Ω–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤!
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Blob Storage

–í Vercel Dashboard ‚Üí Storage ‚Üí Blob:

- ‚úÖ Blob Storage —Å–æ–∑–¥–∞–Ω
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ –ø—Ä–æ–µ–∫—Ç—É
- ‚úÖ –¢–æ–∫–µ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

1. Vercel Dashboard ‚Üí Storage ‚Üí Blob
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Blob Storage
3. –í–∫–ª–∞–¥–∫–∞ **Browse** ‚Äî –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. Vercel Dashboard ‚Üí Storage ‚Üí Blob
2. –í–∫–ª–∞–¥–∫–∞ **Usage**
   - –û–±—ä–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
   - –¢—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ–¥–∞—á–∏

### –õ–∏–º–∏—Ç—ã Free Tier

- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: 1 GB
- **–ü–µ—Ä–µ–¥–∞—á–∞**: 100 GB/–º–µ—Å—è—Ü
- **–ó–∞–ø—Ä–æ—Å—ã**: –ë–µ–∑–ª–∏–º–∏—Ç–Ω–æ

---

## üêõ Troubleshooting

### ‚ùå –û—à–∏–±–∫–∞: "BLOB_READ_WRITE_TOKEN is not defined"

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–∫–µ–Ω –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables
2. –î–æ–±–∞–≤—å—Ç–µ `BLOB_READ_WRITE_TOKEN`
3. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

### ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞

**–ü—Ä–∏—á–∏–Ω–∞:** Blob Storage –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –ø—Ä–æ–µ–∫—Ç—É

**–†–µ—à–µ–Ω–∏–µ:**
1. Vercel Dashboard ‚Üí Storage ‚Üí Blob
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à Blob Storage
3. –ù–∞–∂–º–∏—Ç–µ **Connect Project**
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

### ‚ùå –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤–º–µ—Å—Ç–æ Blob

**–ü—Ä–∏—á–∏–Ω–∞:** `BLOB_READ_WRITE_TOKEN` –ø—É—Å—Ç–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!
- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/media`
- –ù–∞ production —Å —Ç–æ–∫–µ–Ω–æ–º –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å Blob

### ‚ùå 403 Forbidden –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ —Ñ–∞–π–ª–∞–º

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∏–∑ Blob Storage
2. –û–±–Ω–æ–≤–∏—Ç–µ `BLOB_READ_WRITE_TOKEN`
3. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ñ–∞–π–ª—ã –≤ `/media`:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–∞ production
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ Media

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ API (—Å–∫—Ä–∏–ø—Ç)

```typescript
// migrate-to-blob.ts
import fs from 'fs'
import path from 'path'
import { getPayload } from 'payload'

async function migrate() {
  const payload = await getPayload({ config: './payload.config.ts' })
  
  const mediaDir = './media'
  const files = fs.readdirSync(mediaDir)
  
  for (const file of files) {
    const filePath = path.join(mediaDir, file)
    const fileBuffer = fs.readFileSync(filePath)
    
    await payload.create({
      collection: 'media',
      data: {
        alt: file,
      },
      file: {
        data: fileBuffer,
        mimetype: 'image/jpeg', // –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π mimetype
        name: file,
        size: fileBuffer.length,
      },
    })
  }
  
  console.log('Migration complete!')
}

migrate()
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –û—Å—Ç–∞–≤—å—Ç–µ `BLOB_READ_WRITE_TOKEN` –ø—É—Å—Ç—ã–º
- ‚úÖ –§–∞–π–ª—ã –±—É–¥—É—Ç –≤ `/media` (—É–¥–æ–±–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

### –î–ª—è production
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Blob Storage
- ‚úÖ –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –î–ª—è preview deployments
- ‚úÖ Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ Blob Storage
- ‚úÖ –§–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Vercel Blob Documentation](https://vercel.com/docs/storage/vercel-blob)
- [Payload Storage Plugin](https://payloadcms.com/docs/upload/overview)
- [Vercel Environment Variables](https://vercel.com/docs/concepts/projects/environment-variables)

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] –°–æ–∑–¥–∞–Ω Blob Storage –≤ Vercel
- [ ] Blob –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –ø—Ä–æ–µ–∫—Ç—É
- [ ] –¢–æ–∫–µ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- [ ] `BLOB_READ_WRITE_TOKEN` –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Vercel
- [ ] –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–¥–µ–ø–ª–æ–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º

**–ì–æ—Ç–æ–≤–æ! –í–∞—à Blob Storage –Ω–∞—Å—Ç—Ä–æ–µ–Ω! üéâ**

