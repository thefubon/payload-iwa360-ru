# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Production

## ‚ö†Ô∏è –í–∞–∂–Ω–æ! –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### 1Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í–∞—à–∞ production –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é:

#### –ß–µ—Ä–µ–∑ Vercel Postgres Dashboard:

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Vercel Dashboard](https://vercel.com/dashboard)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. **Storage** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. –ù–∞–∂–º–∏—Ç–µ **"Query"** –∏–ª–∏ **".sql"** 
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ **–≤–µ—Å—å –∫–æ–¥** –∏–∑ —Ñ–∞–π–ª–∞:
   ```
   migrations/update-schema-2025-10-06.sql
   ```
6. –î–æ–∂–¥–∏—Ç–µ—Å—å —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–¥–æ–ª–∂–Ω–æ –∑–∞–Ω—è—Ç—å 1-2 —Å–µ–∫—É–Ω–¥—ã)

#### –ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç –º–∏–≥—Ä–∞—Ü–∏—è:

‚úÖ **12 –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π** –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –±–æ–∫–æ–≤—ã—Ö –æ—Ç—Å—Ç—É–ø–æ–≤ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –ª–∏–Ω–∏–∏  
‚úÖ **–ù–æ–≤—ã–µ —Ä–æ–ª–∏** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: `editor`, `viewer`  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å–æ —Å—Ç–∞—Ä–æ–π —Ä–æ–ª—å—é `user`

### 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Query —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ Vercel:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ enum —Ä–æ–ª–µ–π
SELECT enumlabel 
FROM pg_enum 
WHERE enumtypid = (SELECT oid FROM pg_type WHERE typname = 'enum_users_role')
ORDER BY enumsortorder;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–æ–ª–∏ `admin`, `user`, `editor`, `viewer`

### 3Ô∏è‚É£ –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –∫–æ–¥ –Ω–∞ Vercel

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å:

```bash
git add .
git commit -m "feat: add role-based access control and adaptive side offsets"
git push origin main
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Vercel CLI:
```bash
vercel --prod
```

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –¥–æ—Å—Ç—É–ø–æ–≤

–î–æ–±–∞–≤–ª–µ–Ω–∞ **3-—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π**:

| –†–æ–ª—å | –ü—Ä–∞–≤–∞ |
|------|-------|
| **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ) |
| **–†–µ–¥–∞–∫—Ç–æ—Ä** | –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è) |
| **–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å** | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä (read-only) |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** | –£—Å—Ç–∞—Ä–µ–≤—à–∞—è —Ä–æ–ª—å (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –†–µ–¥–∞–∫—Ç–æ—Ä) |

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –±–æ–∫–æ–≤—ã–µ –æ—Ç—Å—Ç—É–ø—ã

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ–∫–æ–≤—ã—Ö –æ—Ç—Å—Ç—É–ø–æ–≤ –¥–ª—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –ª–∏–Ω–∏–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
- –õ–µ–≤—ã–π –æ—Ç—Å—Ç—É–ø –¥–ª—è 6 –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç–æ–≤ (Mobile ‚Üí 2XL)
- –ü—Ä–∞–≤—ã–π –æ—Ç—Å—Ç—É–ø –¥–ª—è 6 –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç–æ–≤ (Mobile ‚Üí 2XL)

## üîç –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–î –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é (—à–∞–≥ 1)

### –û—à–∏–±–∫–∞ "invalid input value for enum enum_users_role: 'user'"

**–ü—Ä–∏—á–∏–Ω–∞:** –í –ë–î –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—å—é `'user'`, –Ω–æ enum –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω  
**–†–µ—à–µ–Ω–∏–µ:** –ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–∏—Ç —Ä–æ–ª–∏ `editor` –∏ `viewer`, —Ä–æ–ª—å `user` –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### Application error: a server-side exception

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ö–µ–º—ã –ë–î –∏ –∫–æ–¥–∞  
**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ production build –Ω–∞ Vercel (Auto-deploy –ø–æ—Å–ª–µ push)

## üìù –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: https://payload.iwa360.ru
2. ‚úÖ –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É: https://payload.iwa360.ru/admin
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º"
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª–∏ `'user'` –Ω–∞ `'editor'`:

```sql
-- –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é 'user' –Ω–∞ 'editor'
UPDATE users SET role = 'editor' WHERE role = 'user';
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è

1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É –ø–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º** ‚Üí **Users** ‚Üí **Create New**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ email, –ø–∞—Ä–æ–ª—å, –∏–º—è
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å **"–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)"**
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

---

**–î–∞—Ç–∞:** 6 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 4.2.0  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î)
